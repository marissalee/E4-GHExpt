---
title: "Make Fig 2"
author: "Marissa Lee"
date: "September 26, 2014"
output:
  pdf_document: default
  html_document: default
---
*Filename: e4_vis_md.Rmd'*

*A. This code needs the following files:*  

1. 'e4_potData.txt' in 'e4DataPackage_092614' folder
2. 'e4_potData_dictionary.txt' in 'e4DataPackage_092614' folder
3. 'e4_cleanCode.R' in 'e4CodePackage_100614' folder
4. 'e4_calcsiCode.R' in 'e4CodePackage_100614' folder

*B. This code does the following things:*  

1. Clean raw dataset (run external code)
2. Plot
    + Fig2. Mv density treatment vs plant biomass
    + Fig3. Monoculture type vs soil meas at harvest (s1)
    + Fig4. Mixture plant biomass vs soil meas (s1) or soil meas diff relative to the baseline (s1s0)

4. Fit models
    + A. To predict s1s0 using mivi biomass, compabund, and total
    + B. To predict s1 using mivi biomass, compabund, and total

*C. This code produces the following items:*

1. NA 


*******************

#1. Clean raw dataset (run external code)
```{r,echo=TRUE}
source('e4CodePackage_100614/e4_cleanCode.R')
#str(data)
```

*******************

#2. Plot  

##Fig2. Mv density treatment vs plant biomass
```{r,echo=TRUE}
source('e4CodePackage_100614/e4_makeFig2.R')
fig2
```

##Fig3. Monoculture type vs soil measure value (weighted and unweighted)
```{r,echo=TRUE}
source('e4CodePackage_100614/e4_makeFig3.R')
fig3
```

##Fig4. Mixture plant biomass vs soil measure (s1) or soil measure difference relative to the baseline (s1s0) 
+ Calculate the change in soil measurement values in the presence of M.v. (run external code)
```{r,echo=TRUE}
source('e4CodePackage_100614/e4_calcsiCode.R')
#str(datas)
```

+ Plot
```{r,echo=TRUE}
source('e4CodePackage_100614/e4_makeFig4.R')
fig4
```

*******************

#3. Fit models 

##A. To predict s1s0 using mivi biomass, compabund, and total
+ Set up model fxns (run external code)  
```{r, echo=TRUE}
source('e4CodePackage_100614/e4_fitmodCode.R')
#ModFxn1
#ModFxn2
#ModFxn3
```
+ Set up generic fxn to pull out info from each fitted model 
+ Fit the models  
+ Organize fitted model results into tables; view the fitted model results
+ Significant model terms

Model 1. s1s0 = (mivi * beta)  
```{r,echo=FALSE}
#dim(modl1)
PvalSumm(modl1, 0.1)
```
  
Model 2. s1s0 = (mivi * beta) + (compabund * beta2) + ((mivi * compabund) * beta3)  
```{r,echo=FALSE}
#dim(modl2)
PvalSumm(modl2, 0.1)
```
  
Model 3. s1s0 = (total * beta)  
```{r,echo=FALSE}
#dim(modl3)
PvalSumm(modl3, 0.1)
```


##B. To predict s1 using mivi biomass, compabund, and total
+ Set up model fxns (run external code ... THIS NEEDS TO BE ADDED)  
```{r, echo=TRUE}
# source('e4CodePackage_100614/e4_fitmodCode.R') #this was already loaded above...
#ModFxn1
#ModFxn2
#ModFxn3
```
+ Set up generic fxn to pull out info from each fitted model 
+ Fit the models  
+ Organize fitted model results into tables; view the fitted model results
+ Significant model terms

Model 1. s1s0 = (mivi * beta)  
```{r,echo=FALSE}
# #dim(modl1)
# PvalSumm(modl1, 0.1)
```
  
Model 2. s1s0 = (mivi * beta) + (compabund * beta2) + ((mivi * compabund) * beta3)  
```{r,echo=FALSE}
# #dim(modl2)
# PvalSumm(modl2, 0.1)
```
  
Model 3. s1s0 = (total * beta)  
```{r,echo=FALSE}
# #dim(modl3)
# PvalSumm(modl3, 0.1)
```








